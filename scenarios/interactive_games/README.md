# Interactive Games シナリオ

## 🎯 学習目標

このシナリオでは、仕様書ベースでインタラクティブなゲームを GitHub Copilot と共に実装します：

- **仕様駆動ゲーム開発**：詳細な仕様書に基づいた実装アプローチ
- **モダンWeb技術の活用**：Three.js（3D）、Canvas API（2D）、リアルタイム描画
- **ゲーム開発の基礎**：ゲームループ、物理演算、衝突判定、スコアシステム
- **インタラクティブUI実装**：キーボード・マウス入力、アニメーション、エフェクト

## 📋 前提条件

- [Spec Driven Flow シナリオ](../spec_driven_flows/README.md) の完了（推奨）
- HTML5 Canvas または Three.js の基礎知識（学習しながらでも可）
- JavaScript のイベント処理の理解

## 🎮 実装可能なゲーム

このシナリオでは、以下の2つのゲームから選択して実装できます：

### 1. Energy Orb Collector（3Dゲーム）

**概要**: Three.js を使用した3D空間でのアイテム収集ゲーム

**技術スタック**: 
- Three.js（3D描画）
- JavaScript（ゲームロジック）
- HTML5/CSS3（UI）

**学習要素**:
- 3D空間の理解（座標系、カメラ、ライティング）
- 3Dオブジェクトの移動・回転
- 衝突判定（3D）
- パーティクルエフェクト

### 2. Tetris（2Dゲーム）

**概要**: 古典的なテトリスの現代的な実装

**技術スタック**:
- HTML5 Canvas（2D描画）
- JavaScript（ゲームロジック）
- CSS3（スタイリング）

**学習要素**:
- Canvas API を使った2D描画
- ゲームループの実装
- マトリックス操作（回転・移動）
- タイマーとスコアシステム

## 🚀 実装手順

### ステップ 1: ゲーム選択と仕様書の確認

#### Energy Orb Collector を選択する場合

1. 仕様書を確認：`scenarios/interactive_games/energy_orb_collector/spec.md`
2. 主要な機能要件を理解：
   - プレイヤーキャラクターの3D移動
   - エナジーオーブのランダム出現・収集
   - 制限時間とスコアシステム
   - 3Dエフェクトとビジュアル演出

#### Tetris を選択する場合

1. 仕様書を確認：`scenarios/interactive_games/tetris/spec.md`
2. 主要な機能要件を理解：
   - 7種類のテトリミノ（ブロック）
   - 回転・移動・落下システム
   - ライン消去とスコアシステム
   - レベルアップによる速度変化

### ステップ 2: GitHub Copilot による実装

#### 仕様書をContextに追加

1. VS Code で選択したゲームの仕様書ファイルを開く
2. 仕様書の内容をすべて選択してContextに追加
3. GitHub Copilot Chat を開く（`Ctrl+Shift+I` または `Cmd+Shift+I`）

#### Energy Orb Collector の実装プロンプト

```text
#file:energy_orb_collector/spec.md を元にゲームを実装してください。

以下の技術要件に従ってください：
- Three.js を使用した3D描画
- モダンなECMAScript（ES6+）構文
- レスポンシブデザイン対応
- 直感的なキーボード操作（WASD + マウス）
- 視覚的なエフェクト（パーティクル、光源効果）

実装ファイルは scenarios/interactive_games/energy_orb_collector/generated 以下に配置してください。

必要なファイル：
- index.html（メインページ）
- game.js（ゲームロジック）
- style.css（スタイリング）
- README.md（実装詳細）
```

#### Tetris の実装プロンプト

```text
#file:tetris/spec.md を元にゲームを実装してください。

以下の技術要件に従ってください：
- HTML5 Canvas を使用した2D描画
- モダンなECMAScript（ES6+）構文
- レスポンシブデザイン対応
- 滑らかなアニメーション
- 本格的なテトリスのゲームルール実装

実装ファイルは scenarios/interactive_games/tetris/generated 以下に配置してください。

必要なファイル：
- index.html（メインページ）
- tetris.js（ゲームロジック）
- style.css（スタイリング）
- README.md（実装詳細）
```

### ステップ 3: 動作確認とテスト

#### ローカル環境での起動

```bash
# Live Server を使用（推奨）
# VS Code で index.html を右クリック → "Open with Live Server"

# または Python HTTP サーバーを使用
cd scenarios/interactive_games/[選択したゲーム]/generated
python -m http.server 8000
# ブラウザで http://localhost:8000 にアクセス
```

#### Energy Orb Collector の動作確認

1. **基本操作**:
   - WASD キーでキャラクター移動
   - マウスでカメラ回転
   - エナジーオーブに接触してスコア獲得

2. **ゲームシステム**:
   - 制限時間のカウントダウン
   - オーブ収集時のエフェクト
   - スコア表示の更新
   - ゲーム終了時のリザルト表示

3. **3D機能**:
   - 滑らかなキャラクター移動
   - 動的なライティング
   - パーティクルエフェクト

#### Tetris の動作確認

1. **基本操作**:
   - 矢印キーでテトリミノ移動
   - 上矢印キーで回転
   - スペースキーで高速落下

2. **ゲームシステム**:
   - テトリミノの自動落下
   - ライン消去とスコア加算
   - レベルアップによる速度変化
   - ゲームオーバー条件

3. **2D描画**:
   - 滑らかなアニメーション
   - ブロックの色分け
   - UI要素（スコア、レベル、次のブロック）

### ステップ 4: カスタマイズと拡張

#### Energy Orb Collector の拡張アイデア

**初級拡張**:
- 異なる種類のオーブ（得点・時間延長・特殊効果）
- 障害物の追加
- BGM・効果音の実装

**中級拡張**:
- マルチプレイヤー機能
- ランキングシステム
- パワーアップアイテム

**上級拡張**:
- 物理エンジンの導入
- VR対応
- ユーザー生成コンテンツ

#### Tetris の拡張アイデア

**初級拡張**:
- 次の複数ブロック表示
- ホールド機能
- ゴーストブロック（落下予想位置）

**中級拡張**:
- マルチプレイヤー対戦
- 特殊ブロック（爆弾、消去ブロック）
- カスタムテーマ

**上級拡張**:
- AI対戦相手
- ブロックエディター
- レプレイ機能

## 🎨 期待される完成イメージ

### Energy Orb Collector
- **3D空間**: 美しいライティングと陰影効果
- **プレイヤー**: 滑らかに移動する3Dキャラクター
- **エフェクト**: オーブ収集時のパーティクルエフェクト
- **UI**: スコア・タイマー・操作説明の統合された界面

### Tetris
- **クリーンなデザイン**: 本家テトリスを彷彿とさせる洗練されたUI
- **滑らかな動作**: 60FPSでの安定したアニメーション
- **視覚効果**: ライン消去時のエフェクト
- **完全な機能**: 本格的なテトリス体験

## 🛠️ トラブルシューティング

### 共通の問題

#### Three.js/Canvas が動作しない
- ブラウザがWebGLに対応しているか確認
- JavaScriptコンソールでエラーメッセージを確認
- CDN から Three.js が正しく読み込まれているか確認

#### ゲームが重い・フレームレートが低い
- 3Dオブジェクトの数を減らす
- テクスチャのサイズを最適化
- 不要なエフェクトを無効化

#### キーボード入力が反応しない
- ページにフォーカスが当たっているか確認
- イベントリスナーが正しく設定されているか確認

### Energy Orb Collector 固有の問題

#### キャラクターが見えない
- カメラの位置と向きを確認
- オブジェクトのスケールが適切か確認

#### 衝突判定が動作しない
- オブジェクトの境界ボックスを確認
- 距離計算のロジックを確認

### Tetris 固有の問題

#### ブロックの描画がおかしい
- Canvas のサイズとスケールを確認
- 座標系の計算を確認

#### 回転が正しくない
- 回転マトリックスの実装を確認
- 境界チェックのロジックを確認

## 💡 GitHub Copilot 活用のコツ

### 効果的なプロンプト例

**具体的な機能実装**:
```text
Three.js でプレイヤーキャラクターが WASD キーで移動し、マウスでカメラを回転する機能を実装してください。移動は滑らかで、地面との衝突判定も含めてください。
```

**段階的な改良**:
```text
現在のテトリミノ回転機能に、フィールド境界での制限と他のブロックとの衝突チェックを追加してください。
```

### Context の活用

1. **仕様書**: 全体的な方向性を定めるため
2. **既存コード**: 既に実装済みの部分との整合性を保つため
3. **エラーログ**: 問題解決のため

## 🎯 学習ポイント

このシナリオで習得できるスキル：

### 技術的スキル
1. **3D/2Dグラフィックス**: Three.js や Canvas API の使用
2. **ゲームループ**: リアルタイム処理の実装
3. **イベント処理**: ユーザー入力の適切な処理
4. **パフォーマンス最適化**: 60FPS維持のための工夫

### 設計スキル
1. **仕様書の読解**: 要件を正確に理解し実装に反映
2. **モジュール設計**: 拡張可能なコード構造
3. **ユーザー体験**: 直感的で楽しい操作感の実現

## 🔗 次のステップ

Interactive Games シナリオが完了したら、以下に進むことをお勧めします：

- **[E2E Testing](../e2e_test/README.md)**: ゲームの動作テスト自動化
- **[Design System](../design_system/README.md)**: UI/UXの統一と改善

## 📚 参考文献

- [Three.js 公式ドキュメント](https://threejs.org/docs/)
- [HTML5 Canvas API Reference](https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API)
- [Game Development Patterns](https://gameprogrammingpatterns.com/)
- [🤖 Awesome GitHub Copilot Customizations](https://github.com/github/awesome-copilot)
